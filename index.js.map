{"version":3,"file":"index.js","mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACuB;AACK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,iHAAiH;AACjH;AACA;AACA;AACA;AACA,uDAAuD,OAAO;AAC9D,wCAAwC,OAAO;AAC/C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,mCAAmC,gDAAgD,aAAa,gDAAgD,0BAA0B,gDAAgD,aAAa,gDAAgD;AACvR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,4BAA4B;AAChC,iFAAiF,gDAAgD;AACjI;AACA,6EAA6E,YAAY;AACzF,oCAAoC,cAAc;AAClD,kCAAkC,YAAY;AAC9C,wCAAwC,YAAY;AACpD,iGAAiG,aAAa;AAC9G,KAAK;AACL;AACA,yDAAyD,iDAAiD;AAC1G;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,oEAAoE,gBAAgB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA,KAAK;AACL;AACA,2BAA2B;AAC3B,yDAAyD,mDAAmD,mEAAmE,MAAM;AACrL,+BAA+B,MAAM;AACrC,iCAAiC,kBAAkB;AACnD;AACA;AACA;AACA,OAAO;AACP;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,OAAO;AAClE,wCAAwC,OAAO;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA,oDAAoD,MAAM;AAC1D;AACA,sDAAsD,cAAc;AACpE,sDAAsD,eAAe;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC","sources":["webpack://memory-game/./src/scripts.js"],"sourcesContent":["/* eslint-disable consistent-return */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-continue */\r\n/* eslint-disable no-shadow */\r\n/* eslint-disable no-nested-ternary */\r\n/* eslint-disable max-len */\r\n/* eslint-disable no-return-assign */\r\n/* eslint-disable no-unused-expressions */\r\nimport 'normalize.css';\r\nimport './style/styles.css';\r\n\r\n// прелоадер\r\n// eslint-disable-next-line func-names\r\nwindow.onload = function () {\r\n  document.body.classList.add('loaded_hiding');\r\n  window.setTimeout(() => {\r\n    document.body.classList.add('loaded');\r\n    document.body.classList.remove('loaded_hiding');\r\n  }, 500);\r\n};\r\n\r\n// на русском локально из json файла получаю факты\r\nasync function getData(n) {\r\n  const quotes = 'assets/facts.json';\r\n  const res = await fetch(quotes);\r\n  const data = await res.json();\r\n  return data.value[n];\r\n}\r\n\r\nlocalStorage.score = localStorage.score ? localStorage.score : '';\r\nlocalStorage.players = localStorage.players ? localStorage.players : '';\r\n\r\nlet scoreArr = localStorage.score.split('\\n');\r\nlet players = localStorage.players.split('\\n');\r\n\r\nconst num = 10; // количество карточек\r\nconst arr = [];\r\nlet numOpen = 0;\r\nlet score = 0;\r\nconst compliment = ['Здорово', 'Вот это да', 'Огонь', 'Потрясающе', 'Ого'];\r\n\r\nconst saveNameBtns = document.querySelectorAll('.save-name');\r\nsaveNameBtns.forEach((btn) => {\r\n  btn.addEventListener('click', saveName);\r\n});\r\n\r\nconst nameInp = document.querySelectorAll('.name');\r\nlocalStorage.name ? nameInp.forEach((inp) => inp.value = localStorage.name) : askName();\r\n\r\n// создаём массив карточек и перемешиваем\r\nfor (let i = 1; i <= num; i += 1) {\r\n  arr.push(i);\r\n  arr.push(i);\r\n}\r\narr.sort(() => Math.random() - 0.5);\r\n\r\n// вывод шапки игры\r\ndocument.querySelector('.game-header').innerHTML += '<div class=\\'game-header\\'><div style=\"flex-direction: row; display:flex\"><button  id=\"settings\" style=\"width:90px\"><svg><use xlink:href=\"assets/sprite.svg#settings\"></use></svg></button> <button style=\"width:160px\" id=\"restart\">restart</button></div> <div><span>score:</span><span class=\\'cur-score\\'>0</span></div></div>';\r\n\r\n// выводим на поле\r\nconst gameSection = document.querySelector('.game-field');\r\narr.forEach((number, i) => {\r\n  gameSection.innerHTML += `<div class=\"memory-card _${number}\">\\n\r\n    <img class=\"back\" src=\"assets/png/${number}.png\" alt=\"Memory Card\">\r\n    <img class=\"front\" src=\"assets/vincent.png\"\">\r\n  </div>`;\r\n});\r\n\r\nlet cards = document.querySelectorAll('.memory-card');\r\ncards.forEach((card) => card.addEventListener('click', flipCard));\r\n\r\nconst settingsBtn = document.querySelector('#settings');\r\nsettingsBtn.addEventListener('click', settings);\r\n\r\nconst restartBtn = document.querySelector('#restart');\r\nrestartBtn.addEventListener('click', restart);\r\n\r\nconst alreadyLoaded = new Set();\r\n\r\nconst closeWinWindowBtns = document.querySelectorAll('.close');\r\ncloseWinWindowBtns.forEach((btn) => {\r\n  btn.addEventListener('click', (e) => {\r\n    if (!e.path[1].classList.contains('settings-window')) {\r\n      winner();\r\n    } else {\r\n      settings();\r\n    }\r\n  });\r\n});\r\n\r\ndocument.querySelector('.art').addEventListener('click', showArt);\r\n\r\nfunction flipCard() {\r\n  // во время игры\r\n  if (document.querySelectorAll('.open').length < 2 && !this.classList.contains('match') && !this.classList.contains('flip')) {\r\n    document.querySelectorAll('.preload img').forEach((img) => {\r\n      alreadyLoaded.add(img.alt);\r\n    });\r\n    alreadyLoaded.has(String(parseInt(this.classList.value.match(/\\d+/), 10))) ? 0 : document.querySelector('.preload').innerHTML\r\n        += `<img src=\"assets/gif/${parseInt(this.classList.value.match(/\\d+/), 10)}.gif\" alt=\"${parseInt(this.classList.value.match(/\\d+/), 10)}\"><img src=\"assets/arts/${parseInt(this.classList.value.match(/\\d+/), 10)}.jpg\" alt=\"${parseInt(this.classList.value.match(/\\d+/), 10)}\">`;\r\n\r\n    this.classList.toggle('flip');\r\n    this.classList.toggle('open');\r\n    score += 1;\r\n    document.querySelector('.cur-score').textContent = score;\r\n    const open = document.querySelectorAll('.open');\r\n    open.length === 2 ? compareCards(open) : 0;\r\n  } else if (numOpen === num) { // после игры для вывода инфо о картинах\r\n    document.querySelector('.paint').style.backgroundImage = `url('assets/arts/${parseInt(this.classList.value.match(/\\d+/), 10)}.jpg')`;\r\n    getData(parseInt(this.classList.value.match(/\\d+/), 10) - 1).then((result) => {\r\n      document.querySelector('.description').innerHTML = `<p class=\"title\">${result.name}</p>\r\n                <p class=\"artist\">${result.artist}</p>\r\n                <p class=\"year\">${result.year}</p>\r\n                <div class=\"art-fact\">${result.fact}</div>\r\n                <p class=\"place\"><svg><use xlink:href=\"assets/sprite.svg#location\"></use></svg>${result.place}</p>`;\r\n    });\r\n\r\n    const selectedCards = document.querySelectorAll(`._${parseInt(this.classList.value.match(/\\d+/), 10)} .back`);\r\n    selectedCards.forEach((card) => {\r\n      convertPngToGif(card);\r\n      setTimeout(() => {\r\n        convertGifToPng(card);\r\n      }, 3000);\r\n    });\r\n\r\n    document.querySelector('.lock-click').classList.remove('hide');\r\n    setTimeout(() => {\r\n      showArt();\r\n      document.querySelector('.lock-click').classList.add('hide');\r\n    }, 3000);\r\n  }\r\n}\r\n\r\ndocument.getElementById('rating').addEventListener('click', () => { ratingClick(); });\r\n\r\nfunction settings() {\r\n  document.querySelector('.glass').classList.toggle('hide');\r\n  document.querySelector('.settings-window').classList.toggle('show');\r\n  setTimeout(() => {\r\n    if (document.querySelector('.rating').classList.contains('show')) {\r\n      document.querySelector('.rating').classList.toggle('show');\r\n      document.querySelector('.menu').classList.toggle('show');\r\n    } else if (document.querySelector('.rules').classList.contains('show')) {\r\n      document.querySelector('.rules').classList.toggle('show');\r\n      document.querySelector('.menu').classList.toggle('show');\r\n    }\r\n  }, 500);\r\n}\r\n\r\nfunction compareCards(open) {\r\n  if (open[0].classList.value === open[1].classList.value) { // короче если совпадают классы с номером карты у обоих\r\n    open.forEach((openCard) => {\r\n      openCard.classList.remove('open');\r\n      openCard.classList.toggle('match');\r\n    });\r\n    numOpen += 1;\r\n    if (numOpen === num) { // все открыты\r\n      document.querySelector('.text').innerHTML += `<p>${compliment[getRandomInt(0, compliment.length - 1)]}! Знаете, сколько шагов вам понадобилось для победы?</p><p>Всего ${score}!</p><p  class='addition'>Теперь можете посмотреть на реальные картины, кликнув на любую карточку, или начать игру заново и поставить новый рекорд:)</p>`;\r\n      localStorage.score += `${score}\\n`;\r\n      localStorage.players += `${localStorage.name}\\n`;\r\n      lengthCheck();\r\n      setTimeout(() => {\r\n        winner();\r\n      }, 800);\r\n    }\r\n  } else {\r\n    open.forEach((openCard) => {\r\n      setTimeout(() => {\r\n        openCard.classList.remove('flip');\r\n        openCard.classList.remove('open');\r\n      }, 800);\r\n    });\r\n  }\r\n}\r\n\r\nfunction restart() {\r\n  window.stop();\r\n  numOpen = 0;\r\n  score = 0;\r\n  document.querySelector('.cur-score').textContent = score;\r\n  document.querySelector('.text').innerHTML = '';\r\n\r\n  cards.forEach((card) => {\r\n    card.classList.remove('match');\r\n    card.classList.remove('flip');\r\n  });\r\n\r\n  setTimeout(() => {\r\n    gameSection.innerHTML = '';\r\n    arr.sort(() => Math.random() - 0.5);\r\n    // вывод карточек\r\n    arr.forEach((number, i) => {\r\n      gameSection.innerHTML += `<div class=\"memory-card _${number}\">\\n\r\n    <img class=\"back\" src=\"assets/png/${number}.png\" alt=\"Memory Card\">\r\n    <img class=\"front\" src=\"assets/vincent.png\"\">\r\n  </div>`;\r\n    });\r\n    cards = document.querySelectorAll('.memory-card');\r\n    cards.forEach((card) => card.addEventListener('click', flipCard));\r\n  }, 500);\r\n}\r\n\r\nfunction winner() {\r\n  document.querySelector('.glass').classList.toggle('hide');\r\n  document.querySelector('.winner-text').classList.toggle('show');\r\n}\r\n\r\nfunction showArt() {\r\n  document.querySelector('.glass').classList.toggle('hide');\r\n  document.querySelector('.art').classList.toggle('show');\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction askName() {\r\n  document.querySelector('.glass').classList.toggle('hide');\r\n  document.querySelector('.ask-name').classList.toggle('show');\r\n}\r\n\r\nfunction saveName(val = false) {\r\n  if (typeof (val) === 'string') {\r\n    if (val !== '') {\r\n      localStorage.name = val;\r\n    } else {\r\n      nameInp.forEach((element) => element.style.outlineColor = 'red');\r\n      setTimeout(() => {\r\n        nameInp.forEach((inp) => inp.value = localStorage.name ? localStorage.name : '');\r\n      }, 250);\r\n      setTimeout(() => {\r\n        nameInp.forEach((element) => element.style.outlineColor = 'Fuchsia');\r\n      }, 500);\r\n\r\n      return 0;\r\n    }\r\n  } else if (nameInp[0].value !== '') {\r\n    localStorage.name = nameInp[0].value;\r\n  } else {\r\n    nameInp.forEach((element) => element.style.outlineColor = 'red');\r\n    setTimeout(() => {\r\n      nameInp.forEach((inp) => inp.value = localStorage.name ? localStorage.name : '');\r\n    }, 250);\r\n    setTimeout(() => {\r\n      nameInp.forEach((element) => element.style.outlineColor = 'Fuchsia');\r\n    }, 500);\r\n\r\n    return 0;\r\n  }\r\n  document.activeElement.blur();\r\n  nameInp.forEach((inp) => inp.value = localStorage.name);\r\n  document.querySelector('.glass').classList.toggle('hide');\r\n  document.querySelector('.ask-name').classList.remove('show');\r\n  document.querySelector('.settings-window').classList.remove('show');\r\n  // убрать границу\r\n}\r\n\r\nfunction ratingClick() {\r\n  document.querySelector('.rating').classList.toggle('show');\r\n  document.querySelector('.menu').classList.toggle('show');\r\n  scoreArr = localStorage.score.split('\\n');\r\n  players = localStorage.players.split('\\n');\r\n  tableCreate(players, scoreArr);\r\n}\r\n\r\nfunction tableCreate(player, num) {\r\n  const total = sortScore(player, num);\r\n  document.querySelector('.table table tbody') ? document.querySelector('.table table tbody').remove() : 0;\r\n  const body = document.querySelector('.table');\r\n  const tbl = document.querySelector('.table table') ? document.querySelector('.table table') : document.createElement('table');\r\n\r\n  for (let i = 0; i < total.length; i += 1) {\r\n    const tr = tbl.insertRow();\r\n    for (let j = 0; j < 3; j += 1) {\r\n      const td = tr.insertCell();\r\n      j === 0\r\n        ? td.appendChild(document.createTextNode(`${i + 1}`))\r\n        : j === 1\r\n          ? td.appendChild(document.createTextNode(`${total[i].name}`))\r\n          : td.appendChild(document.createTextNode(`${total[i].score}`));\r\n    }\r\n  }\r\n  body.appendChild(tbl);\r\n}\r\n\r\nfunction sortScore(player, num) {\r\n  const scoreObj = [];\r\n  for (let i = 0; i < player.length; i += 1) {\r\n    if (player[i] === '') continue;\r\n    scoreObj.push({\r\n      name: player[i],\r\n      score: num[i],\r\n    });\r\n  }\r\n  scoreObj.sort((a, b) => (a.score > b.score ? 1 : -1));\r\n  return scoreObj;\r\n}\r\n\r\nfunction lengthCheck() {\r\n  const max = 10;\r\n  scoreArr = localStorage.score.split('\\n');\r\n  players = localStorage.players.split('\\n');\r\n\r\n  if (players.length > max + 1) {\r\n    do {\r\n      players.shift();\r\n      scoreArr.shift();\r\n    } while (players.length > max + 1);\r\n    localStorage.players = players.join('\\n');\r\n    localStorage.score = scoreArr.join('\\n');\r\n  }\r\n}\r\n\r\nfunction convertPngToGif(e) {\r\n  const splitStr = e.src.split('/');\r\n  const number = splitStr[splitStr.length - 1].split('.')[0];\r\n  e.src = `assets/gif/${number}.gif`;\r\n}\r\n\r\nfunction convertGifToPng(e) {\r\n  const splitStr = e.src.split('/');\r\n  const number = splitStr[splitStr.length - 1].split('.')[0];\r\n  e.src = `assets/png/${number}.png`;\r\n}\r\n\r\ndocument.querySelectorAll('.name').forEach((name) => {\r\n  name.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Enter')saveName(name.value);\r\n  });\r\n});\r\n"],"names":[],"sourceRoot":""}